# مرحله 1: انتخاب ایمیج پایه (Python 3.11 سبک)
FROM python:3.11-slim

# مرحله 2: تنظیم مسیر کاری داخل کانتینر
WORKDIR /app

# مرحله 3: کپی فایل‌های پروژه به داخل کانتینر
COPY ./api /app

# مرحله 4: نصب وابستگی‌ها (اگر requirements.txt داری)
COPY requirements.txt /app/
RUN pip install --no-cache-dir -r requirements.txt

# مرحله 5: اکسپوز کردن پورت
EXPOSE 8000

# مرحله 6: اجرای برنامه با uvicorn
CMD ["uvicorn", "app:app", "--host", "0.0.0.0", "--port", "8000"]
